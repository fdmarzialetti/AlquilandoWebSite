<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Adicionales Agregados</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body id="app">
<div class="d-flex justify-content-between align-items-center p-2"
     style="background-image: url('../images/backgroundHeader.jpg');">


  <a href="../index.html" class="d-flex align-items-center text-decoration-none">
    <img src="../images/AlquilandoLogo.png" alt="Alquilando" width="120" />
    <span class="fs-3 fw-bold text-dark ms-2">Alquilando</span>
  </a>
  <button class="btn btn-custom fw-bold dropdown-toggle boton-cuenta" type="button" id="dropdownCuenta"
          data-bs-toggle="dropdown" aria-expanded="false">
    Cuenta
  </button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownCuenta">
    <li><a class="dropdown-item" href="#" @click="mostrarModalCambioClaveVoluntario(true)">Cambiar Contraseña</a></li>
    <li><a class="dropdown-item" href="#" @click="logout">Cerrar sesión</a></li>
  </ul>
</div>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark " style="font-family: sans-serif; width: 100%;">
  <div class="container-fluid">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mx-auto d-flex flex-row gap-4">
        <li class="nav-item">
          <a class="nav-link text-white" href="../pages/Employee.html">Grilla Reservas</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="../pages/listVehicles.html">Vehículos</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-white" href="#" data-bs-toggle="dropdown">
            Acciones
          </a>
          <ul class="dropdown-menu dropdown-menu-dark">
            <li><a class="dropdown-item" href="../pages/formClient.html">Registrar Cliente</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="bg-secondary py-3 border-bottom shadow-sm mb-4">
  <div class="container text-center">
    <h2 class="fw-semibold text-white m-0">Confirmación de Reserva</h2>
  </div>
</div>


  <div  class="container py-4">

    <!-- Vehículo seleccionado -->
    <div class="card mb-4" v-if="detalleVehiculo && fechasReserva">
      <div class="row g-0">
        <div class="col-md-4">
          <img :src="'data:image/jpeg;base64,' + detalleVehiculo.image" class="img-fluid rounded-start" alt="Vehículo" />
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h5 class="card-title">{{ detalleVehiculo.brand.name }} {{ detalleVehiculo.name }}</h5>
            <p class="card-text mb-1"><strong>Desde:</strong> {{ fechaInicioFormateada }}</p>
            <p class="card-text mb-1"><strong>Hasta:</strong> {{ fechaFinFormateada }}</p>
            <p class="card-text"><strong>Precio de reserva:</strong> {{ formatPriceArg(precioFinal) }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Lista de adicionales -->
    <ul class="list-group mb-4" v-if="mostrarLista">
      <li class="list-group-item d-flex justify-content-between align-items-center" v-for="a in addicionalesVehiculo" :key="a.id">
        <span>{{ a.name }}</span>
        <span class="badge bg-primary rounded-pill">{{ formatPriceArg(a.price) }}</span>
        <i class="bi bi-x-circle-fill text-danger" style="cursor: pointer;" title="Quitar adicional"
       @click="eliminarAdicional(index)"></i>
      </li>
    </ul>

    <!-- Mensaje si no hay adicionales -->
    <div v-if="mostrarMensajeVacio" class="alert alert-info">
      Aún no se han cargado adicionales.
    </div>

    <div class="text-end fw-bold mb-4" >
      Total adicionales: {{ formatPriceArg(totalAdicionales) }}
    </div>

    <div class="text-end fw-bold mb-4">Precio total : {{ formatPriceArg(precioTotal) }}</div>

    <!-- Botones -->
    <div class="d-flex justify-content-between">
<button class="btn btn-outline-success" data-bs-toggle="modal" data-bs-target="#modalAdicional" v-show="adicionales.length > 0">
  Agregar Adicional
</button>      <button class="btn btn-primary" @click="finalizar">Finalizar</button>
    </div>
  </div>

  <!-- Modal para seleccionar adicional -->
<div class="modal fade" id="modalAdicional" tabindex="-1" aria-labelledby="modalAdicionalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <form class="modal-content" @submit.prevent>
      <div class="modal-header">
        <h5 class="modal-title" id="modalAdicionalLabel">Agregar Adicional</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        <div class="verify-box w-100">
          <label class="form-label">Seleccione un adicional:</label>
          <select class="form-select my-3" v-model="idSeleccionado">
            <option disabled value="">Seleccione un adicional</option>
            <option v-for="a in adicionales" :key="a.id" :value="a.id">
              {{ a.name }} - {{ formatPriceArg(a.price) }}
            </option>
          </select>
          <button class="btn btn-success w-100" type="button" @click="cargarAdicional" data-bs-dismiss="modal">
            Agregar
          </button>
        </div>
      </div>
    </form>
  </div>
</div>


  <!-- Scripts -->
  <script src="../scripts/additional.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


